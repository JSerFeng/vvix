const e=e=>{console.warn(e)},t=(e,t)=>{console.error(e),console.error(t)},n=(e,t)=>e.flags===t.flags&&e.type===t.type,l=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!(n in t)||e[n]!==t[n])return!1;return!0},i=e=>{const t=e.length;if(0===t)return[];if(1===t)return[0];const n=new Array(t).fill(1),l=[];let i=-1;for(let l=t-1;l>=0;l--){const r=e[l];for(let o=l+1;o<t;o++){r<e[o]&&(n[l]=Math.max(n[l],1+n[o]),(-1===i||n[i]<n[l])&&(i=l))}}if(-1===i)return[];for(;i<t;){const e=n[i];for(l.push(i++);n[i]!==e-1&&i<t;)i++}return l},r=e=>Array.isArray(e),o=e=>"object"==typeof e&&null!==e,s=e=>null==e,c=e=>null!=e,a=[];let f=null,u=!1;function h(e,t={lazy:!1,active:!0}){const n=d(e,t);return n.lazy||n(),n}function d(e,t){const n=function t(...l){t.active&&!u&&(a.includes(n)||(a.push(t),f=n,e(...l),a.pop(),f=null))};return n.lazy=t.lazy||!1,n.active=t.active||!0,n.raw=e,n.deps=[],n.scheduler=t.scheduler||null,n}const p=(e,t)=>{const n=_.get(e);if(!n)return;const l=n.get(t);l&&l.forEach((e=>{e!==f&&(e.scheduler?e.scheduler(e):e())}))},_=new WeakMap,y=(e,t)=>{if(!f)return;let n=_.get(e);n||_.set(e,n=new Map);let l=n.get(t);l||n.set(t,l=new Set),l.has(f)||(l.add(f),f.deps.push(l))},g=e=>{e.active=!1},m=()=>{u=!0},k=()=>{u=!1},v=new WeakMap,C=new WeakMap,E={get(e,t,n){if("_mark"===t)return!0;if("_raw"===t)return e;const l=Reflect.get(e,t,n);return y(e,t),o(l)&&!l._isVNode?w(l):l},set(e,t,n,l){const i=e[t],r=Reflect.set(e,t,n,l);return n!==i&&p(e,t),r},has(e,t){const n=Reflect.has(e,t);return y(e,t),n},deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return p(e,t),n}},w=e=>{if("object"!=typeof e)return e;if(e._raw)return e;let t;return(t=v.get(e))||(t=new Proxy(e,E),C.set(t,e)),t},F=e=>C.get(e)||e,b=e=>(e._raw=!0,e),M=e=>e&&!!e._isRef;class x{constructor(e){this._isRef=!0,s(e)?this._value=null:this._value=o(e)?w(e):e}get value(){return y(this,"value"),this._value}set value(e){e!==this._value&&(this._value=e,p(this,"value"))}}function A(e){return s(e)?new x:M(e)?e:new x(e)}var S,N;!function(e){e[e.Element=1]="Element",e[e.FC=2]="FC",e[e.Text=4]="Text",e[e.Fragment=8]="Fragment",e[e.Portal=16]="Portal"}(S||(S={})),function(e){e[e.Multiple=1]="Multiple",e[e.Single=2]="Single",e[e.NoChildren=8]="NoChildren"}(N||(N={}));const T=Symbol("Fragment"),P=Symbol("Portal");class R{constructor(e,t,n,l){this.data={},this._isVNode=!0,this.el=null,this._instance=null,this.type=e,"function"==typeof e?(this.flags=S.FC,this._instance={_props:{children:[],...t},_render:null,_mounted:!1,_vnode:null,_update:null,_onMount:[],_onUnmount:[]}):this.flags="string"==typeof e?S.Element:e===T?S.Fragment:e===P?S.Portal:S.Text,c(l)?this.key=l:c(t.key)?(this.key=t.key,delete t.key):this.key=null,this.data=t;Array.isArray(n)?(this.children=n.map((e=>o(e)?e:B(null,null,e+""))),this.childFlags=N.Multiple):o(n)?(this.children=n,this.childFlags=N.Single):c(n)?this.flags&S.Text?(this.childFlags=N.NoChildren,this.children=n.toString()):(this.childFlags=N.Single,this.children=B(null,null,n.toString())):(this.childFlags=N.NoChildren,this.children=null)}}function j(e,t){return n=>("function"==typeof e&&(e=z(e,n)),()=>z(P,{children:e},t))}function B(e,t,...n){let l=null;return 0===n.length?l=null:1===n.length?(l=n[0],"object"!=typeof l&&(l+="")):l=n,new R(e,t||{},l)}const z=(e,t,n)=>{let{children:l}=t;if(r(l)){let e=!1,t=[];for(const n of l)if(r(n)){e=!0,t=n;break}if(e){const e={};for(const n of t)if(c(n.key)){if(n.key in e){console.error("[key property] can not be the same \nduplicated key: \n"+n.key);break}e[n.key]=!0}else console.error("child in an array must have a key \n");l=l.flat()}}return new R(e,t,l,n)},D=z,W=[];let L=!1;const U=e=>{W.includes(e)||W.push(e),L||(L=!0,Promise.resolve().then(O))},O=()=>{W.forEach((e=>e())),W.length=0,L=!1},V=/\[A-Z]|^(?:value|checked|selected|muted)$/;let Z=null;const $={getElement:e=>document.querySelector(e),createElement:e=>document.createElement(e),createTextNode:e=>document.createTextNode(e),appendChild:(e,t)=>e.appendChild(t),insertBefore:(e,t,n)=>e.insertBefore(t,n),removeChild:(e,t)=>e.removeChild(t),setAttribute(e,t,n){/\[A-Z]|^(?:value|checked|selected|muted)$/.test(t)?e[t]=n:"key"!==t&&"children"!==t&&e.setAttribute(t,n)},setText:(e,t)=>e.textContent=t,patchData(e,t,n,l,i){if(n!==l&&!(i&&i&S.Element&&"children"===t))switch(t){case"style":if(n)for(const t in n)e.style[t]=n[t];if(l)for(const t in l)n&&n[t]===l[t]||(e.style[t]="");break;case"class":e.className=n;break;default:if(t.startsWith("on")){const i=t.split("on")[1].toLowerCase();n&&e.addEventListener(i,n),l&&e.removeEventListener(i,l)}else V.test(t)?e[t]=n:e.setAttribute(t,n)}}};function q(e){function t(n,l,i){if(s(n))return;const{flags:r}=n;r&S.FC?function(e,n,l){const{type:i}=e;e._instance._update=()=>{if(e._instance._mounted){const t=e._instance._vnode,l=e._instance._render();a(l,t,n),e._instance._vnode=l}else{const i=e._instance._vnode=e._instance._render();t(i,n,l),e.el=i.el,e._instance._mounted=!0;for(const t of e._instance._onMount)t()}},Z=e._instance,e._instance._render=i(e._instance._props),Z=null,h((()=>{e._instance._update()}),{scheduler:U})}(n,l,i):r&S.Element?function(n,l,i){const{data:r,childFlags:o,children:s}=n,c=n.el=e.createElement(n.type);r.ref&&(r.ref.value=c);for(const t in r)e.patchData(c,t,r[t],null,S.Element);i?e.insertBefore(l,c,i):e.appendChild(l,c);!function(e,n,l,i){if(e&N.NoChildren)return;e&N.Single?t(n,i):e&N.Multiple&&function(e,n){for(const l of n)t(l,e.el)}(l,n)}(o,s,n,c)}(n,l,i):r&S.Text?function(t,n,l){const i=e.createTextNode(t.children);t.el=i,l?e.insertBefore(n,i,l):e.appendChild(n,i)}(n,l,i):r&S.Portal?function(n){const l=n.el="string"==typeof n.key?e.getElement(n.key):n.key;t(n.children,l)}(n):function(e,n,l){const{children:i}=e;Array.isArray(i)?(i.forEach((e=>t(e,n,l))),e.el=i[0].el):i&&(t(i,n,l),e.el=i.el)}(n,l,i)}function r(t,n){const{flags:l,children:i}=t;if(l&S.Element||l&S.Text)e.removeChild(n,t.el);else if(l&S.FC)o(t,n);else if(l&S.Fragment)Array.isArray(i)?i.forEach((e=>r(e,n))):i&&r(i,n);else if(l&S.Portal){const e=t.el;r(t.children,e)}}function o(t,n){const{childFlags:l,children:i}=t,r=t.el;if(l&N.Multiple)for(const e of i)e.flags&S.FC&&o(e,r);let s=t._instance._onUnmount;if(s.length)for(const e of s)e();t._instance=null,e.removeChild(n,r)}function a(i,o,s){if(i&&o)if(n(i,o)){const t=i.flags;t&S.FC?function(e,t){if(e.el=t.el,e._instance=t._instance,function(e,t){const n=e._instance._props,i=t._instance._props;return delete n.children,delete i.children,l(n,i)}(e,t))return;const n=e._instance._props,i=t._instance._props;for(const t in n)n[t]!==i[t]&&(e._instance._props[t]=n[t]);e._instance._update()}(i,o):t&S.Text?function(t,n){const l=t.el=n.el;t.children!==n.children&&e.setText(l,t.children)}(i,o):t&S.Element?function(t,n){const l=t.el=n.el;for(const i in t.data)e.patchData(l,i,t.data[i],n.data[i],S.Element);for(const i in n.data)t.data[i]||e.patchData(l,i,null,n.data[i],S.Element);f(t,n)}(i,o):t&S.Portal?function(e,t){const n=t.el;a(e.children,t.children,n)}(i,o):function(e,t,n){f(e,t,n)}(i,o,s)}else!function(e,n,l){l.removeChild(n.el),t(e,l)}(i,o,s);else i?t(i,s):o&&r(o,s)}function f(n,l,o){const{childFlags:s,children:f}=n,{childFlags:u,children:h}=l,d=o||l.el;if(s&N.NoChildren){if(u&N.Single)r(h,d);else if(u&N.Multiple)for(const e of h)r(e,d)}else if(s&N.Single){if(u&N.NoChildren)t(f,d);else if(u&N.Single)a(f,h,d);else if(u&N.Multiple){for(const e of h)r(e,d);t(f,d)}}else if(s&N.Multiple)if(u&N.NoChildren)for(const e of f)t(e,d);else if(u&N.Single){r(h,d);for(const e of f)t(e,d)}else u&N.Multiple&&function(n,l,o){let s=0,f=n.length-1,u=n[s],h=l.length-1,d=l[s];e:{for(;s<=f&&s<=h&&u.key===d.key;){if(a(u,d,o),s++,s>f||s>h)break e;u=n[s],d=l[s]}for(u=n[f],d=l[h];s<=f&&s<=h&&u.key===d.key;){if(a(u,d,o),f--,h--,s>f||s>h)break e;u=n[f],d=l[h]}}if(s>f&&s<=h)for(let e=s;e<=h;e++)r(l[e],o);else if(s>h){const e=h+1>=l.length?void 0:l[h+1].el;for(let l=s;l<=f;l++)t(n[l],o,e)}else{let p=!1,_=0,y=0;const g=f-s+1,m=new Array(g).fill(-1),k={},v={};for(let e=0;e<g;e++)k[n[s+e].key]=e;for(let e=s;e<=h;e++)if(d=l[e],v[d.key]=!0,y<g){const t=k[d.key];c(t)?(u=n[t+s],a(u,d,o),y++,m[t]=e,t<_?p=!0:_=t):r(d,o)}else r(d,o);if(p){const l=i(m);let r=l.length-1;for(let i=f;i>=s;i--){if(u=n[i],-1===m[i]){t(u,o,i+1<n.length?n[i+1].el:void 0)}if(i===l[r])r--;else{const t=i+1<n.length?n[i+1].el:void 0;e.insertBefore(o,u.el,t)}}}else for(let e=f;e>=s;e--)if(u=n[e],!v[u.key]){t(u,o,e+1>=n.length?void 0:n[e+1].el)}}}(f,h,d)}return function(e,t){a(e,t.vnode,t)}}const G=e=>{J()&&Z._onMount.push(e)},H=e=>{J()&&Z._onUnmount.push(e)},I=e=>{J()&&Z._props.ref&&(Z._props.ref.value=e)},J=()=>!!Z||(e("hook must be called inside a function component"),!1),K=q($),Q=(e,t)=>{t||(t=$);const n=q(t);return{mount(l){l?"string"!=typeof l||(l=t.getElement(l))?n(e,l):console.warn("无效的id或者class"):console.warn("请指定一个挂在节点的id或者class或者dom节点")}}};export{N as ChildrenFlags,T as Fragment,P as Portal,x as Ref,R as VNode,S as VNodeFlags,t as _err,e as _warn,f as activeEffect,$ as baseNodeOps,J as checkHookAvailable,Q as createApp,d as createEffect,j as createPortal,q as createRenderer,h as effect,a as effectStack,I as expose,B as h,r as isArray,c as isDef,o as isObject,M as isRef,n as isSameVNode,s as isUndef,z as jsx,D as jsxs,i as lis,b as markRaw,G as onMounted,H as onUnmounted,m as pauseTracking,w as reactive,A as ref,K as render,k as resetTracking,l as shallowEqual,g as stop,F as toRaw,y as track,p as trigger};

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=(e,t)=>e.flags===t.flags&&e.type===t.type,t=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!(n in t)||e[n]!==t[n])return!1;return!0},n=e=>{const t=e.length;if(0===t)return[];if(1===t)return[0];const n=new Array(t).fill(1),r=[];let s=-1;for(let r=t-1;r>=0;r--){const o=e[r];for(let l=r+1;l<t;l++){o<e[l]&&(n[r]=Math.max(n[r],1+n[l]),(-1===s||n[s]<n[r])&&(s=r))}}if(-1===s)return[];for(;s<t;){const e=n[s];for(r.push(s++);n[s]!==e-1&&s<t;)s++}return r},r=e=>Array.isArray(e),s=e=>"object"==typeof e&&null!==e,o=e=>null==e,l=e=>null!=e,i=[];exports.activeEffect=null;let a=!1;function c(e,t={lazy:!1,active:!0}){const n=d(e,t);return n.lazy||n(),n}function d(e,t){const n=function t(...r){t.active&&!a&&(i.includes(n)||(i.push(t),exports.activeEffect=n,e(...r),i.pop(),exports.activeEffect=null))};return n.lazy=t.lazy||!1,n.active=t.active||!0,n.raw=e,n.deps=[],n.scheduler=t.scheduler||null,n}const p=(e,t)=>{const n=f.get(e);if(!n)return;const r=n.get(t);r&&r.forEach((e=>{e!==exports.activeEffect&&(e.scheduler?e.scheduler(e):e())}))},f=new WeakMap,u=(e,t)=>{if(!exports.activeEffect)return;let n=f.get(e);n||f.set(e,n=new Map);let r=n.get(t);r||n.set(t,r=new Set),r.has(exports.activeEffect)||(r.add(exports.activeEffect),exports.activeEffect.deps.push(r))},h=new WeakMap,g=new WeakMap,x={get(e,t,n){if("_mark"===t)return!0;if("_raw"===t)return e;const r=Reflect.get(e,t,n);return u(e,t),s(r)&&!r._isVNode?_(r):r},set(e,t,n,r){const s=e[t],o=Reflect.set(e,t,n,r);return n!==s&&p(e,t),o},has(e,t){const n=Reflect.has(e,t);return u(e,t),n},deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return p(e,t),n}},_=e=>{if("object"!=typeof e)return e;if(e._raw)return e;let t;return(t=h.get(e))||(t=new Proxy(e,x),g.set(t,e)),t},F=e=>e&&!!e._isRef;class v{constructor(e){this._isRef=!0,o(e)?this._value=null:this._value=s(e)?_(e):e}get value(){return u(this,"value"),this._value}set value(e){e!==this._value&&(this._value=e,p(this,"value"))}}var y,m;exports.VNodeFlags=void 0,(y=exports.VNodeFlags||(exports.VNodeFlags={}))[y.Element=1]="Element",y[y.FC=2]="FC",y[y.Text=4]="Text",y[y.Fragment=8]="Fragment",y[y.Portal=16]="Portal",y[y.Svg=32]="Svg",exports.ChildrenFlags=void 0,(m=exports.ChildrenFlags||(exports.ChildrenFlags={}))[m.Multiple=1]="Multiple",m[m.Single=2]="Single",m[m.NoChildren=8]="NoChildren";const C=Symbol("Fragment"),N=Symbol("Portal");class k{constructor(e,t,n,r){this.data={},this._isVNode=!0,this.el=null,this._instance=null,this.type=e,"function"==typeof e?(this.flags=exports.VNodeFlags.FC,this._instance={_props:Object.assign({children:[]},t),_render:null,_mounted:!1,_vnode:null,_update:null,_onMount:[],_onUnmount:[]}):this.flags="string"==typeof e?"svg"===e?exports.VNodeFlags.Svg:exports.VNodeFlags.Element:e===C?exports.VNodeFlags.Fragment:e===N?exports.VNodeFlags.Portal:exports.VNodeFlags.Text,l(r)?this.key=r:l(t.key)?(this.key=t.key,delete t.key):this.key=null,this.data=t;Array.isArray(n)?(this.children=n.map((e=>s(e)?e:E(null,null,e+""))),this.childFlags=exports.ChildrenFlags.Multiple):s(n)?(this.children=n,this.childFlags=exports.ChildrenFlags.Single):l(n)?this.flags&exports.VNodeFlags.Text?(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=n.toString()):(this.childFlags=exports.ChildrenFlags.Single,this.children=E(null,null,n.toString())):(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=null)}}function E(e,t,...n){let r=null;return 0===n.length?r=null:1===n.length?(r=n[0],"object"!=typeof r&&(r+="")):r=n,new k(e,t||{},r)}const V=(e,t,n)=>{let{children:s}=t;if(r(s)){let e=!1,t=[];for(const n of s)if(r(n)){e=!0,t=n;break}if(e){const e={};for(const n of t)if(l(n.key)){if(n.key in e){console.error("[key property] can not be the same \nduplicated key: \n"+n.key);break}e[n.key]=!0}else console.error("child in an array must have a key \n");s=s.flat()}}return new k(e,t,s,n)},w=V,M=[];let S=!1;const b=e=>{M.includes(e)||M.push(e),S||(S=!0,Promise.resolve().then(A))},A=()=>{M.forEach((e=>e())),M.length=0,S=!1},T=/\[A-Z]|^(?:value|checked|selected|muted)$/;exports._currentMountingFC=null;const P={getElement:e=>document.querySelector(e),createElement:e=>document.createElement(e),createTextNode:e=>document.createTextNode(e),createComment:e=>document.createComment(e),createSvgElement:e=>document.createElementNS("http://www.w3.org/2000/svg",e),appendChild:(e,t)=>e.appendChild(t),insertBefore:(e,t,n)=>e.insertBefore(t,n),removeChild:(e,t)=>e.removeChild(t),setAttribute(e,t,n){/\[A-Z]|^(?:value|checked|selected|muted)$/.test(t)?e[t]=n:"key"!==t&&"children"!==t&&e.setAttribute(t,n)},setText:(e,t)=>e.textContent=t,patchData(e,t,n,r,s){if(n!==r&&!(s&&s&exports.VNodeFlags.Element&&"children"===t))switch(t){case"style":if(n)for(const t in n)e.style[t]=n[t];if(r)for(const t in r)n&&n[t]===r[t]||(e.style[t]="");break;case"class":e.className=n;break;default:if(t.startsWith("on")){const s=t.split("on")[1].toLowerCase();n&&e.addEventListener(s,n),r&&e.removeEventListener(s,r)}else T.test(t)?e[t]=n:e.setAttribute(t,n)}}};function R(r){function s(e,t,n,l){if(o(e))return;const{flags:i}=e;i&exports.VNodeFlags.FC?function(e,t,n,r){const{type:o}=e;e._instance._update=()=>{var o;if(e._instance._mounted){const r=e._instance._vnode,s=e._instance._render(),l=null===(o=null==r?void 0:r.el)||void 0===o?void 0:o.nextSibling;d(s,r,t,n,l),e._instance._vnode=s}else{const o=e._instance._vnode=e._instance._render();s(o,t,n,r),e.el=o.el,e._instance._mounted=!0;for(const t of e._instance._onMount)t()}},exports._currentMountingFC=e._instance,e._instance._render=o(e._instance._props),exports._currentMountingFC=null,c((()=>{e._instance._update()}),{scheduler:b})}(e,t,n,l):i&(exports.VNodeFlags.Element|exports.VNodeFlags.Svg)?function(e,t,n,o){const{data:l,childFlags:i,children:a,type:c}=e,d=e.el=n?r.createSvgElement(c):r.createElement(c);l.ref&&(l.ref.value=d);for(const e in l)r.patchData(d,e,l[e],null,exports.VNodeFlags.Element);o?r.insertBefore(t,d,o):r.appendChild(t,d);!function(e,t,n,r,o){if(e&exports.ChildrenFlags.NoChildren)return;if(e&exports.ChildrenFlags.Single)s(t,r,o);else if(e&exports.ChildrenFlags.Multiple){const e=n.el;for(const n of t)s(n,e,o)}}(i,a,e,d,n)}(e,t,n,l):i&exports.VNodeFlags.Text?function(e,t,n){const s=r.createTextNode(e.children);e.el=s,n?r.insertBefore(t,s,n):r.appendChild(t,s)}(e,t,l):i&exports.VNodeFlags.Portal?function(e){const t=e.el="string"==typeof e.key?r.getElement(e.key):e.key;s(e.children,t,!1)}(e):function(e,t,n,o){const{children:l}=e;Array.isArray(l)?l.forEach((e=>s(e,t,n,o))):l&&s(l,t,n,o);const i=r.createComment("__FRAGMENT_END__");e.el=i,o?r.insertBefore(t,i,o):r.appendChild(t,i)}(e,t,n,l)}function i(e,t){const{flags:n,children:s,el:o}=e;if(n&exports.VNodeFlags.Element||n&exports.VNodeFlags.Text)r.removeChild(t,e.el);else if(n&exports.VNodeFlags.FC)a(e,t);else if(n&exports.VNodeFlags.Fragment)Array.isArray(s)?s.forEach((e=>i(e,t))):s&&i(s,t),r.removeChild(t,o);else if(n&exports.VNodeFlags.Portal){const t=e.el;i(e.children,t)}}function a(e,t){const{childFlags:n,children:s}=e,o=e.el;if(n&exports.ChildrenFlags.Multiple)for(const e of s)e.flags&exports.VNodeFlags.FC&&a(e,o);let l=e._instance._onUnmount;if(l.length)for(const e of l)e();e._instance=null,r.removeChild(t,o)}function d(n,o,l,a,c){if(n&&o)if(e(n,o)){const e=n.flags;e&exports.VNodeFlags.FC?function(e,n){if(e.el=n.el,e._instance=n._instance,function(e,n){const r=e._instance._props,s=n._instance._props;return delete r.children,delete s.children,t(r,s)}(e,n))return;const r=e._instance._props,s=n._instance._props;for(const t in r)r[t]!==s[t]&&(e._instance._props[t]=r[t]);e._instance._update()}(n,o):e&exports.VNodeFlags.Text?function(e,t){const n=e.el=t.el;e.children!==t.children&&r.setText(n,e.children)}(n,o):e&exports.VNodeFlags.Element?function(e,t,n){const s=e.el=t.el;for(const n in e.data)r.patchData(s,n,e.data[n],t.data[n],exports.VNodeFlags.Element);for(const n in t.data)e.data[n]||r.patchData(s,n,null,t.data[n],exports.VNodeFlags.Element);p(e,t,n)}(n,o,a):e&exports.VNodeFlags.Portal?function(e,t){const n=e.el=t.el;d(e.children,t.children,n,!1)}(n,o):function(e,t,n,r){const s=e.el=t.el;p(e,t,r,n,s)}(n,o,l,a)}else!function(e,t,n,r){var o;const l=null===(o=t.el)||void 0===o?void 0:o.nextSibling;i(t,n),s(e,n,r,l)}(n,o,l,a);else n?s(n,l,a,c):o&&i(o,l)}function p(e,t,o,a,c){const{childFlags:p,children:f}=e,{childFlags:u,children:h}=t,g=a||t.el;if(p&exports.ChildrenFlags.NoChildren){if(u&exports.ChildrenFlags.Single)i(h,g);else if(u&exports.ChildrenFlags.Multiple)for(const e of h)i(e,g)}else if(p&exports.ChildrenFlags.Single){if(u&exports.ChildrenFlags.NoChildren)s(f,g,o,c);else if(u&exports.ChildrenFlags.Single)d(f,h,g,o,c);else if(u&exports.ChildrenFlags.Multiple){for(const e of h)i(e,g);s(f,g,o,c)}}else if(p&exports.ChildrenFlags.Multiple)if(u&exports.ChildrenFlags.NoChildren)for(const e of f)s(e,g,o,c);else if(u&exports.ChildrenFlags.Single){i(h,g);for(const e of f)s(e,g,o,c)}else u&exports.ChildrenFlags.Multiple&&function(e,t,o,a,c){let p=0,f=e.length-1,u=e[p],h=t.length-1,g=t[p];e:{for(;p<=f&&p<=h&&u.key===g.key;){if(d(u,g,o,a),p++,p>f||p>h)break e;u=e[p],g=t[p]}for(u=e[f],g=t[h];p<=f&&p<=h&&u.key===g.key;){if(d(u,g,o,a),f--,h--,p>f||p>h)break e;u=e[f],g=t[h]}}if(p>f&&p<=h)for(let e=p;e<=h;e++)i(t[e],o);else if(p>h){const n=h+1>=t.length?void 0:t[h+1].el;for(let t=p;t<=f;t++)s(e[t],o,a,n)}else{let x=!1,_=0,F=0;const v=f-p+1,y=new Array(v).fill(-1),m={},C={};for(let t=0;t<v;t++)m[e[p+t].key]=t;for(let n=p;n<=h;n++)if(g=t[n],C[g.key]=!0,F<v){const t=m[g.key];l(t)?(u=e[t+p],d(u,g,o,a),F++,y[t]=n,t<_?x=!0:_=t):i(g,o)}else i(g,o);if(x){const t=n(y);let l=t.length-1;for(let n=f;n>=p;n--){if(u=e[n],-1===y[n]){s(u,o,a,n+1<e.length?e[n+1].el:void 0)}if(n===t[l])l--;else{const t=n+1<e.length?e[n+1].el:void 0;r.insertBefore(o,u.el,t)}}}else for(let t=f;t>=p;t--)if(u=e[t],!C[u.key]){s(u,o,a,(t+1>=e.length?void 0:e[t+1].el)||c)}}}(f,h,g,o,c)}return function(e,t){const n=!!(e.flags&exports.VNodeFlags.Svg);d(e,t.vnode,t,n)}}const j=()=>!!exports._currentMountingFC||(_warn("hook must be called inside a function component"),!1);exports.Fragment=C,exports.Portal=N,exports.Ref=v,exports.VNode=k,exports._err=(e,t)=>{console.error(e),console.error(t)},exports._warn=e=>{console.warn(e)},exports.baseNodeOps=P,exports.checkHookAvailable=j,exports.createApp=(e,t)=>{t||(t=P);const n=R(t);return{mount(r){r?"string"!=typeof r||(r=t.getElement(r))?n(e,r):console.warn("无效的id或者class"):console.warn("请指定一个挂在节点的id或者class或者dom节点")}}},exports.createEffect=d,exports.createPortal=function(e,t){return n=>("function"==typeof e&&(e=V(e,n)),()=>V(N,{children:e},t))},exports.createRenderer=R,exports.effect=c,exports.effectStack=i,exports.expose=e=>{j()&&exports._currentMountingFC._props.ref&&(exports._currentMountingFC._props.ref.value=e)},exports.h=E,exports.isArray=r,exports.isDef=l,exports.isObject=s,exports.isRef=F,exports.isSameVNode=e,exports.isUndef=o,exports.jsx=V,exports.jsxs=w,exports.lis=n,exports.markRaw=e=>(e._raw=!0,e),exports.onMounted=e=>{j()&&exports._currentMountingFC._onMount.push(e)},exports.onUnmounted=e=>{j()&&exports._currentMountingFC._onUnmount.push(e)},exports.pauseTracking=()=>{a=!0},exports.reactive=_,exports.ref=function(e){return o(e)?new v:F(e)?e:new v(e)},exports.resetTracking=()=>{a=!1},exports.shallowEqual=t,exports.stop=e=>{e.active=!1},exports.toRaw=e=>g.get(e)||e,exports.track=u,exports.trigger=p;

Object.defineProperty(exports,"__esModule",{value:!0});const e=e=>{console.warn(e)},t=(e,t)=>e.flags===t.flags&&e.type===t.type,n=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!(n in t)||e[n]!==t[n])return!1;return!0},s=e=>{const t=e.length;if(0===t)return[];if(1===t)return[0];const n=new Array(t).fill(1),s=[];let r=-1;for(let s=t-1;s>=0;s--){const l=e[s];for(let o=s+1;o<t;o++){l<e[o]&&(n[s]=Math.max(n[s],1+n[o]),(-1===r||n[r]<n[s])&&(r=s))}}if(-1===r)return[];for(;r<t;){const e=n[r];for(s.push(r++);n[r]!==e-1&&r<t;)r++}return s},r=e=>Array.isArray(e),l=e=>"object"==typeof e&&null!==e,o=e=>null==e,i=e=>null!=e,a=[];exports.activeEffect=null;let c=!1;function f(e,t={lazy:!1,active:!0}){const n=d(e,t);return n.lazy||n(),n}function d(e,t){const n=function t(...s){t.active&&!c&&(a.includes(n)||(a.push(t),exports.activeEffect=n,e(...s),a.pop(),exports.activeEffect=null))};return n.lazy=t.lazy||!1,n.active=t.active||!0,n.raw=e,n.deps=[],n.scheduler=t.scheduler||null,n}const p=(e,t)=>{const n=u.get(e);if(!n)return;const s=n.get(t);s&&s.forEach((e=>{e!==exports.activeEffect&&(e.scheduler?e.scheduler(e):e())}))},u=new WeakMap,h=(e,t)=>{if(!exports.activeEffect)return;let n=u.get(e);n||u.set(e,n=new Map);let s=n.get(t);s||n.set(t,s=new Set),s.has(exports.activeEffect)||(s.add(exports.activeEffect),exports.activeEffect.deps.push(s))},g=new WeakMap,x=new WeakMap,F={get(e,t,n){if("_mark"===t)return!0;if("_raw"===t)return e;const s=Reflect.get(e,t,n);return h(e,t),l(s)&&!s._isVNode?_(s):s},set(e,t,n,s){const r=e[t],l=Reflect.set(e,t,n,s);return n!==r&&p(e,t),l},has(e,t){const n=Reflect.has(e,t);return h(e,t),n},deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return p(e,t),n}},_=e=>{if("object"!=typeof e)return e;if(e._raw)return e;let t;return(t=g.get(e))||(t=new Proxy(e,F),x.set(t,e)),t},y=e=>e&&!!e._isRef;class m{constructor(e){this._isRef=!0,o(e)?this._value=null:this._value=l(e)?_(e):e}get value(){return h(this,"value"),this._value}set value(e){e!==this._value&&(this._value=e,p(this,"value"))}}var v,C;exports.VNodeFlags=void 0,(v=exports.VNodeFlags||(exports.VNodeFlags={}))[v.Element=1]="Element",v[v.FC=2]="FC",v[v.Text=4]="Text",v[v.Fragment=8]="Fragment",v[v.Portal=16]="Portal",exports.ChildrenFlags=void 0,(C=exports.ChildrenFlags||(exports.ChildrenFlags={}))[C.Multiple=1]="Multiple",C[C.Single=2]="Single",C[C.NoChildren=8]="NoChildren";const k=Symbol("Fragment"),N=Symbol("Portal");class E{constructor(e,t,n,s){this.data={},this._isVNode=!0,this.el=null,this._instance=null,this.type=e,"function"==typeof e?(this.flags=exports.VNodeFlags.FC,this._instance={_props:{children:[],...t},_render:null,_mounted:!1,_vnode:null,_update:null,_onMount:[],_onUnmount:[]}):this.flags="string"==typeof e?exports.VNodeFlags.Element:e===k?exports.VNodeFlags.Fragment:e===N?exports.VNodeFlags.Portal:exports.VNodeFlags.Text,i(s)?this.key=s:i(t.key)?(this.key=t.key,delete t.key):this.key=null,this.data=t;Array.isArray(n)?(this.children=n.map((e=>l(e)?e:V(null,null,e+""))),this.childFlags=exports.ChildrenFlags.Multiple):l(n)?(this.children=n,this.childFlags=exports.ChildrenFlags.Single):i(n)?this.flags&exports.VNodeFlags.Text?(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=n.toString()):(this.childFlags=exports.ChildrenFlags.Single,this.children=V(null,null,n.toString())):(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=null)}}function V(e,t,...n){let s=null;return 0===n.length?s=null:1===n.length?(s=n[0],"object"!=typeof s&&(s+="")):s=n,new E(e,t||{},s)}const w=(e,t,n)=>{let{children:s}=t;if(r(s)){let e=!1,t=[];for(const n of s)if(r(n)){e=!0,t=n;break}if(e){const e={};for(const n of t)if(i(n.key)){if(n.key in e){console.error("[key property] can not be the same \nduplicated key: \n"+n.key);break}e[n.key]=!0}else console.error("child in an array must have a key \n");s=s.flat()}}return new E(e,t,s,n)},b=w,M=[];let A=!1;const S=e=>{M.includes(e)||M.push(e),A||(A=!0,Promise.resolve().then(P))},P=()=>{M.forEach((e=>e())),M.length=0,A=!1},T=/\[A-Z]|^(?:value|checked|selected|muted)$/;let R=null;const j={getElement:e=>document.querySelector(e),createElement:e=>document.createElement(e),createTextNode:e=>document.createTextNode(e),appendChild:(e,t)=>e.appendChild(t),insertBefore:(e,t,n)=>e.insertBefore(t,n),removeChild:(e,t)=>e.removeChild(t),setAttribute(e,t,n){/\[A-Z]|^(?:value|checked|selected|muted)$/.test(t)?e[t]=n:"key"!==t&&"children"!==t&&e.setAttribute(t,n)},setText:(e,t)=>e.textContent=t,patchData(e,t,n,s,r){if(n!==s&&!(r&&r&exports.VNodeFlags.Element&&"children"===t))switch(t){case"style":if(n)for(const t in n)e.style[t]=n[t];if(s)for(const t in s)n&&n[t]===s[t]||(e.style[t]="");break;case"class":e.className=n;break;default:if(t.startsWith("on")){const r=t.split("on")[1].toLowerCase();n&&e.addEventListener(r,n),s&&e.removeEventListener(r,s)}else T.test(t)?e[t]=n:e.setAttribute(t,n)}}};function B(e){function r(t,n,s){if(o(t))return;const{flags:l}=t;l&exports.VNodeFlags.FC?function(e,t,n){const{type:s}=e;e._instance._update=()=>{if(e._instance._mounted){const n=e._instance._vnode,s=e._instance._render();c(s,n,t),e._instance._vnode=s}else{const s=e._instance._vnode=e._instance._render();r(s,t,n),e.el=s.el,e._instance._mounted=!0;for(const t of e._instance._onMount)t()}},R=e._instance,e._instance._render=s(e._instance._props),R=null,f((()=>{e._instance._update()}),{scheduler:S})}(t,n,s):l&exports.VNodeFlags.Element?function(t,n,s){const{data:l,childFlags:o,children:i}=t,a=t.el=e.createElement(t.type);l.ref&&(l.ref.value=a);for(const t in l)e.patchData(a,t,l[t],null,exports.VNodeFlags.Element);s?e.insertBefore(n,a,s):e.appendChild(n,a);!function(e,t,n,s){if(e&exports.ChildrenFlags.NoChildren)return;e&exports.ChildrenFlags.Single?r(t,s):e&exports.ChildrenFlags.Multiple&&function(e,t){for(const n of t)r(n,e.el)}(n,t)}(o,i,t,a)}(t,n,s):l&exports.VNodeFlags.Text?function(t,n,s){const r=e.createTextNode(t.children);t.el=r,s?e.insertBefore(n,r,s):e.appendChild(n,r)}(t,n,s):l&exports.VNodeFlags.Portal?function(t){const n=t.el="string"==typeof t.key?e.getElement(t.key):t.key;r(t.children,n)}(t):function(e,t,n){const{children:s}=e;Array.isArray(s)?(s.forEach((e=>r(e,t,n))),e.el=s[0].el):s&&(r(s,t,n),e.el=s.el)}(t,n,s)}function l(t,n){const{flags:s,children:r}=t;if(s&exports.VNodeFlags.Element||s&exports.VNodeFlags.Text)e.removeChild(n,t.el);else if(s&exports.VNodeFlags.FC)a(t,n);else if(s&exports.VNodeFlags.Fragment)Array.isArray(r)?r.forEach((e=>l(e,n))):r&&l(r,n);else if(s&exports.VNodeFlags.Portal){const e=t.el;l(t.children,e)}}function a(t,n){const{childFlags:s,children:r}=t,l=t.el;if(s&exports.ChildrenFlags.Multiple)for(const e of r)e.flags&exports.VNodeFlags.FC&&a(e,l);let o=t._instance._onUnmount;if(o.length)for(const e of o)e();t._instance=null,e.removeChild(n,l)}function c(s,o,i){if(s&&o)if(t(s,o)){const t=s.flags;t&exports.VNodeFlags.FC?function(e,t){if(e.el=t.el,e._instance=t._instance,function(e,t){const s=e._instance._props,r=t._instance._props;return delete s.children,delete r.children,n(s,r)}(e,t))return;const s=e._instance._props,r=t._instance._props;for(const t in s)s[t]!==r[t]&&(e._instance._props[t]=s[t]);e._instance._update()}(s,o):t&exports.VNodeFlags.Text?function(t,n){const s=t.el=n.el;t.children!==n.children&&e.setText(s,t.children)}(s,o):t&exports.VNodeFlags.Element?function(t,n){const s=t.el=n.el;for(const r in t.data)e.patchData(s,r,t.data[r],n.data[r],exports.VNodeFlags.Element);for(const r in n.data)t.data[r]||e.patchData(s,r,null,n.data[r],exports.VNodeFlags.Element);d(t,n)}(s,o):t&exports.VNodeFlags.Portal?function(e,t){const n=t.el;c(e.children,t.children,n)}(s,o):function(e,t,n){d(e,t,n)}(s,o,i)}else!function(e,t,n){n.removeChild(t.el),r(e,n)}(s,o,i);else s?r(s,i):o&&l(o,i)}function d(t,n,o){const{childFlags:a,children:f}=t,{childFlags:d,children:p}=n,u=o||n.el;if(a&exports.ChildrenFlags.NoChildren){if(d&exports.ChildrenFlags.Single)l(p,u);else if(d&exports.ChildrenFlags.Multiple)for(const e of p)l(e,u)}else if(a&exports.ChildrenFlags.Single){if(d&exports.ChildrenFlags.NoChildren)r(f,u);else if(d&exports.ChildrenFlags.Single)c(f,p,u);else if(d&exports.ChildrenFlags.Multiple){for(const e of p)l(e,u);r(f,u)}}else if(a&exports.ChildrenFlags.Multiple)if(d&exports.ChildrenFlags.NoChildren)for(const e of f)r(e,u);else if(d&exports.ChildrenFlags.Single){l(p,u);for(const e of f)r(e,u)}else d&exports.ChildrenFlags.Multiple&&function(t,n,o){let a=0,f=t.length-1,d=t[a],p=n.length-1,u=n[a];e:{for(;a<=f&&a<=p&&d.key===u.key;){if(c(d,u,o),a++,a>f||a>p)break e;d=t[a],u=n[a]}for(d=t[f],u=n[p];a<=f&&a<=p&&d.key===u.key;){if(c(d,u,o),f--,p--,a>f||a>p)break e;d=t[f],u=n[p]}}if(a>f&&a<=p)for(let e=a;e<=p;e++)l(n[e],o);else if(a>p){const e=p+1>=n.length?void 0:n[p+1].el;for(let n=a;n<=f;n++)r(t[n],o,e)}else{let h=!1,g=0,x=0;const F=f-a+1,_=new Array(F).fill(-1),y={},m={};for(let e=0;e<F;e++)y[t[a+e].key]=e;for(let e=a;e<=p;e++)if(u=n[e],m[u.key]=!0,x<F){const n=y[u.key];i(n)?(d=t[n+a],c(d,u,o),x++,_[n]=e,n<g?h=!0:g=n):l(u,o)}else l(u,o);if(h){const n=s(_);let l=n.length-1;for(let s=f;s>=a;s--){if(d=t[s],-1===_[s]){r(d,o,s+1<t.length?t[s+1].el:void 0)}if(s===n[l])l--;else{const n=s+1<t.length?t[s+1].el:void 0;e.insertBefore(o,d.el,n)}}}else for(let e=f;e>=a;e--)if(d=t[e],!m[d.key]){r(d,o,e+1>=t.length?void 0:t[e+1].el)}}}(f,p,u)}return function(e,t){c(e,t.vnode,t)}}const D=()=>!!R||(e("hook must be called inside a function component"),!1),O=B(j);exports.Fragment=k,exports.Portal=N,exports.Ref=m,exports.VNode=E,exports._err=(e,t)=>{console.error(e),console.error(t)},exports._warn=e,exports.baseNodeOps=j,exports.checkHookAvailable=D,exports.createApp=(e,t)=>{t||(t=j);const n=B(t);return{mount(s){s?"string"!=typeof s||(s=t.getElement(s))?n(e,s):console.warn("无效的id或者class"):console.warn("请指定一个挂在节点的id或者class或者dom节点")}}},exports.createEffect=d,exports.createPortal=function(e,t){return n=>("function"==typeof e&&(e=w(e,n)),()=>w(N,{children:e},t))},exports.createRenderer=B,exports.effect=f,exports.effectStack=a,exports.expose=e=>{D()&&R._props.ref&&(R._props.ref.value=e)},exports.h=V,exports.isArray=r,exports.isDef=i,exports.isObject=l,exports.isRef=y,exports.isSameVNode=t,exports.isUndef=o,exports.jsx=w,exports.jsxs=b,exports.lis=s,exports.markRaw=e=>(e._raw=!0,e),exports.onMounted=e=>{D()&&R._onMount.push(e)},exports.onUnmounted=e=>{D()&&R._onUnmount.push(e)},exports.pauseTracking=()=>{c=!0},exports.reactive=_,exports.ref=function(e){return o(e)?new m:y(e)?e:new m(e)},exports.render=O,exports.resetTracking=()=>{c=!1},exports.shallowEqual=n,exports.stop=e=>{e.active=!1},exports.toRaw=e=>x.get(e)||e,exports.track=h,exports.trigger=p;

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=e=>null==e,t=e=>null!=e,n=[];exports.activeEffect=null;let s=!1;function l(e,t={lazy:!1,active:!0}){const n=o(e,t);return n.lazy||n(),n}function o(e,t){const l=function t(...o){t.active&&!s&&(n.includes(l)||(n.push(t),exports.activeEffect=l,e(...o),n.pop(),exports.activeEffect=null))};return l.lazy=t.lazy||!1,l.active=t.active||!0,l.raw=e,l.deps=[],l.scheduler=t.scheduler||null,l}const r=(e,t)=>{const n=i.get(e);if(!n)return;const s=n.get(t);s&&s.forEach((e=>{e!==exports.activeEffect&&(e.scheduler?e.scheduler(e):e())}))},i=new WeakMap,c=(e,t)=>{if(!exports.activeEffect)return;let n=i.get(e);n||i.set(e,n=new Map);let s=n.get(t);s||n.set(t,s=new Set),s.has(exports.activeEffect)||(s.add(exports.activeEffect),exports.activeEffect.deps.push(s))},a=new WeakMap,d=new WeakMap,p={get(e,t,n){if("_mark"===t)return!0;if("_raw"===t)return e;const s=Reflect.get(e,t,n);return c(e,t),"object"==typeof s?f(s):s},set(e,t,n,s){const l=e[t],o=Reflect.set(e,t,n,s);return n!==l&&r(e,t),o},has(e,t){const n=Reflect.has(e,t);return c(e,t),n},deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return r(e,t),n}},f=e=>{if("object"!=typeof e)return e;if(e._raw)return e;let t;return(t=a.get(e))||(t=new Proxy(e,p),d.set(t,e)),t};class u{constructor(t){this._isRef=!0,e(t)?this._value=null:this._value=(e=>"object"==typeof e&&null!==e)(t)?f(t):t}get value(){return c(this,"value"),this._value}set value(e){e!==this._value&&(this._value=e,r(this,"value"))}}function h(t){return e(t)?new u:(e=>e&&!!e._isRef)(t)?t:new u(t)}var g,x;exports.VNodeFlags=void 0,(g=exports.VNodeFlags||(exports.VNodeFlags={}))[g.Element=1]="Element",g[g.FC=2]="FC",g[g.Text=4]="Text",g[g.Fragment=8]="Fragment",exports.ChildrenFlags=void 0,(x=exports.ChildrenFlags||(exports.ChildrenFlags={}))[x.Multiple=1]="Multiple",x[x.Single=2]="Single",x[x.NoChildren=8]="NoChildren";const v=Symbol("Fragment");class F{constructor(e,n,s){this.data={},this._isVNode=!0,this.el=null,this._instance=null,this.type=e,"function"==typeof e?(this.flags=exports.VNodeFlags.FC,this._instance={_props:{children:[],...n},_render:null,_mounted:!1,_vnode:null,_update:null,_onMount:[],_onUnmount:[]}):this.flags="string"==typeof e?exports.VNodeFlags.Element:e===v?exports.VNodeFlags.Fragment:exports.VNodeFlags.Text,this.data=n,this.key=t(n.key)?n.key:null;Array.isArray(s)?(this.children=s.map((e=>"string"==typeof e?_(null,null,e):e)),this.childFlags=exports.ChildrenFlags.Multiple):"object"==typeof s&&null!==s?(this.children=s,this.childFlags=exports.ChildrenFlags.Single):"string"==typeof s?this.flags&exports.VNodeFlags.Text?(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=s):(this.childFlags=exports.ChildrenFlags.Single,this.children=_(null,null,s)):(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=null)}}function _(e,t,...n){let s=null;return 0===n.length?s=null:1===n.length?(s=n[0],"object"!=typeof s&&(s+="")):s=n,new F(e,t||{},s)}const m=(e,t,n)=>{let{children:s}=t;return void 0===s?s=[]:Array.isArray(s)||(s=[s]),_(e,{key:n,...t},...s)},C=m,y=[];let N=!1;const k=e=>{y.includes(e)||y.push(e),N||(N=!0,Promise.resolve().then(E))},E=()=>{y.forEach((e=>e())),y.length=0,N=!1},V=/\[A-Z]|^(?:value|checked|selected|muted)$/;let b=null;const w={getElement:e=>document.querySelector(e),createElement:e=>document.createElement(e),createTextNode:e=>document.createTextNode(e),appendChild:(e,t)=>e.appendChild(t),insertBefore:(e,t,n)=>e.insertBefore(t,n),removeChild:(e,t)=>e.removeChild(t),setAttribute(e,t,n){/\[A-Z]|^(?:value|checked|selected|muted)$/.test(t)?e[t]=n:"key"!==t&&"children"!==t&&e.setAttribute(t,n)},setText:(e,t)=>e.textContent=t,patchData(e,t,n,s,l){if(n!==s&&!(l&&l&exports.VNodeFlags.Element&&"children"===t))switch(t){case"style":if(n)for(const t in n)e.style[t]=n[t];if(s)for(const t in s)n&&n[t]===s[t]||(e.style[t]="");break;case"class":e.className=n;break;default:if(t.startsWith("on")){const l=t.split("on")[1].toLowerCase();n&&e.addEventListener(l,n),s&&e.removeEventListener(l,s)}else V.test(t)?e[t]=n:e.setAttribute(t,n)}}};function A(n){function s(t,o,r){if(e(t))return;const{flags:c}=t;c&exports.VNodeFlags.FC?function(e,t,n){const{type:o}=e;e._instance._update=()=>{if(e._instance._mounted){const n=e._instance._vnode,s=e._instance._render();i(s,n,t),e._instance._vnode=s}else{const l=e._instance._vnode=e._instance._render();s(l,t,n),e.el=l.el,e._instance._mounted=!0;for(const t of e._instance._onMount)t()}},b=e._instance,e._instance._render=o(e._instance._props),b=null,l((()=>{e._instance._update()}),{scheduler:k})}(t,o,r):c&exports.VNodeFlags.Element?function(e,t,l){const{data:o,childFlags:r,children:i}=e,c=e.el=n.createElement(e.type);o.ref&&(o.ref.value=c);for(const e in o)n.patchData(c,e,o[e],null,exports.VNodeFlags.Element);l?n.insertBefore(t,c,l):n.appendChild(t,c);!function(e,t,n,l){if(e&exports.ChildrenFlags.NoChildren)return;e&exports.ChildrenFlags.Single?s(t,l):e&exports.ChildrenFlags.Multiple&&function(e,t){for(const n of t)s(n,e.el)}(n,t)}(r,i,e,c)}(t,o,r):c&exports.VNodeFlags.Text?function(e,t,s){const l=n.createTextNode(e.children);e.el=l,s?n.insertBefore(t,l,s):n.appendChild(t,l)}(t,o,r):function(e,t,n){const{children:l}=e;Array.isArray(l)?(l.forEach((e=>s(e,t,n))),e.el=l[0].el):l&&(s(l,t,n),e.el=l.el)}(t,o,r)}function o(e,t){const{flags:s,children:l}=e;s&exports.VNodeFlags.Element||s&exports.VNodeFlags.Text?n.removeChild(t,e.el):s&exports.VNodeFlags.FC?r(e,t):s&exports.VNodeFlags.Fragment&&(Array.isArray(l)?l.forEach((e=>o(e,t))):l&&o(l,t))}function r(e,t){const{childFlags:n,children:s}=e,l=e.el;if(n&exports.ChildrenFlags.Multiple)for(const e of s)e.flags&exports.VNodeFlags.FC&&r(e,l);let o=e._instance._onUnmount;if(o.length)for(const e of o)e();t.removeChild(l)}function i(e,t,l){if(e&&t)if(r=t,(o=e).flags===r.flags&&o.type===r.type){const s=e.flags;s&exports.VNodeFlags.FC?function(e,t){if(e.el=t.el,e._instance=t._instance,function(e,t){const n=e._instance._props,s=t._instance._props;return delete n.children,delete s.children,((e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!(n in t)||e[n]!==t[n])return!1;return!0})(n,s)}(e,t))return;const n=e._instance._props,s=t._instance._props;for(const t in n)n[t]!==s[t]&&(e._instance._props[t]=n[t]);e._instance._update()}(e,t):s&exports.VNodeFlags.Text?function(e,t){const s=e.el=t.el;e.children!==t.children&&n.setText(s,e.children)}(e,t):s&exports.VNodeFlags.Element?function(e,t){const s=e.el=t.el;for(const l in e.data)n.patchData(s,l,e.data[l],t.data[l],exports.VNodeFlags.Element);for(const l in t.data)e.data[l]||n.patchData(s,l,null,t.data[l],exports.VNodeFlags.Element);c(e,t)}(e,t):function(e,t){c(e,t)}(e,t)}else!function(e,t,n){n.removeChild(t.el),s(e,n)}(e,t,l);else e?s(e,l):t&&n.removeChild(l,t.el);var o,r}function c(e,l){const{childFlags:r,children:c}=e,{childFlags:a,children:d,el:p}=l;if(r&exports.ChildrenFlags.NoChildren){if(a&exports.ChildrenFlags.Single)o(d,p);else if(a&exports.ChildrenFlags.Multiple)for(const e of d)o(e,p)}else if(r&exports.ChildrenFlags.Single){if(a&exports.ChildrenFlags.NoChildren)s(c,p);else if(a&exports.ChildrenFlags.Single)i(c,d,p);else if(a&exports.ChildrenFlags.Multiple){for(const e of d)o(e,p);s(c,p)}}else if(r&exports.ChildrenFlags.Multiple)if(a&exports.ChildrenFlags.NoChildren)for(const e of c)s(e,p);else if(a&exports.ChildrenFlags.Single){o(d,p);for(const e of c)s(e,p)}else a&exports.ChildrenFlags.Multiple&&function(e,l,r){let c=0,a=e.length-1,d=e[c],p=l.length-1,f=l[c];e:{for(;c<=a&&c<=p&&d.key===f.key;){if(i(d,f,r),c++,c>a||c>p)break e;d=e[c],f=l[c]}for(d=e[a],f=l[p];c<=a&&c<=p&&d.key===f.key;){if(i(d,f,r),a--,p--,c>a||c>p)break e;d=e[a],f=l[p]}}if(c>a&&c<=p)for(let e=c;e<=p;e++)o(l[e],r);else if(c>p){const t=p+1>=l.length?void 0:l[p+1].el;for(let n=c;n<=a;n++)s(e[n],r,t)}else{let u=!1,h=0,g=0;const x=a-c+1,v=new Array(x).fill(-1),F={};for(let t=0;t<x;t++)F[e[c+t].key]=t;for(let n=c;n<=p;n++)if(f=l[n],g<x){const s=F[f.key];t(s)?(d=e[s+c],i(d,f,r),g++,v[s]=n,s<h?u=!0:h=s):o(f,r)}else o(f,r);if(u){const t=(e=>{const t=e.length;if(0===t)return[];if(1===t)return[0];const n=new Array(t).fill(1),s=[];let l=-1;for(let s=t-1;s>=0;s--){const o=e[s];for(let r=s+1;r<t;r++)o<e[r]&&(n[s]=Math.max(n[s],1+n[r]),(-1===l||n[l]<n[s])&&(l=s))}if(-1===l)return[];for(;l<t;){const e=n[l];for(s.push(l++);n[l]!==e-1&&l<t;)l++}return s})(v);let l=t.length-1;for(let o=a;o>=c;o--){if(d=e[o],-1===v[o]){s(d,r,o+1<e.length?e[o+1].el:void 0)}if(o===t[l])l--;else{const t=o+1<e.length?e[o+1].el:void 0;n.insertBefore(r,d.el,t)}}}}}(c,d,p)}return function(e,t){const n=t.vnode;n?e?(i(e,n,t),t.vnode=e):(t.removeChild(n.el),t.vnode=null):(s(e,t),t.vnode=e)}}const M=()=>{return!!b||(e="hook must be called inside a function component",console.warn(e),!1);var e},T=A(w),S=(e,t)=>{t||(t=w);const n=A(t);return{mount(s){s?"string"!=typeof s||(s=t.getElement(s))?n(e,s):console.warn("无效的id或者class"):console.warn("请指定一个挂在节点的id或者class或者dom节点")}}},j=({title:e,content:t})=>()=>C("div",{children:[m("h1",{children:e},void 0),m("p",{children:t},void 0)]},void 0);S(m((()=>{const e=h([{id:0,title:"Johnson",content:"I love React"},{id:1,title:"Author",content:"And I love Vue more"},{id:2,title:"Jack",content:"But I hate webpack"}]),t=()=>{e.value.reverse()};return()=>C(v,{children:[m("ul",Object.assign({onClick:t},{children:e.value.map((e=>m(j,Object.assign({},e),e.id)))}),void 0),m("button",{children:"click me"},void 0)]},void 0)}),{},void 0)).mount("#app"),exports.Fragment=v,exports.Ref=u,exports.VNode=F,exports.baseNodeOps=w,exports.checkHookAvailable=M,exports.createApp=S,exports.createEffect=o,exports.createRenderer=A,exports.effect=l,exports.effectStack=n,exports.expose=e=>{M()&&b._props.ref&&(b._props.ref.value=e)},exports.h=_,exports.jsx=m,exports.jsxs=C,exports.markRaw=e=>(e._raw=!0,e),exports.onMounted=e=>{M()&&b._onMount.push(e)},exports.onUnmounted=e=>{M()&&b._onUnmount.push(e)},exports.pauseTracking=()=>{s=!0},exports.queueJob=k,exports.reactive=f,exports.ref=h,exports.render=T,exports.resetTracking=()=>{s=!1},exports.stop=e=>{e.active=!1},exports.toRaw=e=>d.get(e)||e,exports.track=c,exports.trigger=r;

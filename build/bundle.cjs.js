Object.defineProperty(exports,"__esModule",{value:!0});const e=e=>{console.warn(e)},t=(e,t)=>e.flags===t.flags&&e.type===t.type,n=(e,t)=>{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!(n in t)||e[n]!==t[n])return!1;return!0},s=e=>{const t=e.length;if(0===t)return[];if(1===t)return[0];const n=new Array(t).fill(1),s=[];let r=-1;for(let s=t-1;s>=0;s--){const l=e[s];for(let o=s+1;o<t;o++){l<e[o]&&(n[s]=Math.max(n[s],1+n[o]),(-1===r||n[r]<n[s])&&(r=s))}}if(-1===r)return[];for(;r<t;){const e=n[r];for(s.push(r++);n[r]!==e-1&&r<t;)r++}return s},r=e=>"object"==typeof e&&null!==e,l=e=>null==e,o=e=>null!=e,i=[];exports.activeEffect=null;let a=!1;function c(e,t={lazy:!1,active:!0}){const n=d(e,t);return n.lazy||n(),n}function d(e,t){const n=function t(...s){t.active&&!a&&(i.includes(n)||(i.push(t),exports.activeEffect=n,e(...s),i.pop(),exports.activeEffect=null))};return n.lazy=t.lazy||!1,n.active=t.active||!0,n.raw=e,n.deps=[],n.scheduler=t.scheduler||null,n}const p=(e,t)=>{const n=f.get(e);if(!n)return;const s=n.get(t);s&&s.forEach((e=>{e!==exports.activeEffect&&(e.scheduler?e.scheduler(e):e())}))},f=new WeakMap,h=(e,t)=>{if(!exports.activeEffect)return;let n=f.get(e);n||f.set(e,n=new Map);let s=n.get(t);s||n.set(t,s=new Set),s.has(exports.activeEffect)||(s.add(exports.activeEffect),exports.activeEffect.deps.push(s))},u=new WeakMap,g=new WeakMap,x={get(e,t,n){if("_mark"===t)return!0;if("_raw"===t)return e;const s=Reflect.get(e,t,n);return h(e,t),"object"==typeof s?_(s):s},set(e,t,n,s){const r=e[t],l=Reflect.set(e,t,n,s);return n!==r&&p(e,t),l},has(e,t){const n=Reflect.has(e,t);return h(e,t),n},deleteProperty(e,t){const n=Reflect.deleteProperty(e,t);return p(e,t),n}},_=e=>{if("object"!=typeof e)return e;if(e._raw)return e;let t;return(t=u.get(e))||(t=new Proxy(e,x),g.set(t,e)),t};class F{constructor(e){this._isRef=!0,l(e)?this._value=null:this._value=r(e)?_(e):e}get value(){return h(this,"value"),this._value}set value(e){e!==this._value&&(this._value=e,p(this,"value"))}}var y,m;exports.VNodeFlags=void 0,(y=exports.VNodeFlags||(exports.VNodeFlags={}))[y.Element=1]="Element",y[y.FC=2]="FC",y[y.Text=4]="Text",y[y.Fragment=8]="Fragment",exports.ChildrenFlags=void 0,(m=exports.ChildrenFlags||(exports.ChildrenFlags={}))[m.Multiple=1]="Multiple",m[m.Single=2]="Single",m[m.NoChildren=8]="NoChildren";const v=Symbol("Fragment");class C{constructor(e,t,n,s){this.data={},this._isVNode=!0,this.el=null,this._instance=null,this.type=e,"function"==typeof e?(this.flags=exports.VNodeFlags.FC,this._instance={_props:{children:[],...t},_render:null,_mounted:!1,_vnode:null,_update:null,_onMount:[],_onUnmount:[]}):this.flags="string"==typeof e?exports.VNodeFlags.Element:e===v?exports.VNodeFlags.Fragment:exports.VNodeFlags.Text,o(s)?this.key=s:o(t.key)?(this.key=t.key,delete t.key):this.key=null,this.data=t;if(Array.isArray(n)){this.children=n.map((e=>r(e)?e:k(null,null,e.toString())));const e={};for(const t of this.children){if(o(e[t.key])){console.error("[key property] can not be the same \nduplicated key: \n"+t.key);break}o(t.key)&&(e[t.key]=!0)}this.childFlags=exports.ChildrenFlags.Multiple}else r(n)?(this.children=n,this.childFlags=exports.ChildrenFlags.Single):o(n)?this.flags&exports.VNodeFlags.Text?(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=n.toString()):(this.childFlags=exports.ChildrenFlags.Single,this.children=k(null,null,n.toString())):(this.childFlags=exports.ChildrenFlags.NoChildren,this.children=null)}}function k(e,t,...n){let s=null;return 0===n.length?s=null:1===n.length?(s=n[0],"object"!=typeof s&&(s+="")):s=n,new C(e,t||{},s)}const N=(e,t,n)=>{let{children:s}=t;return new C(e,t,s,n)},E=N,V=[];let w=!1;const b=e=>{V.includes(e)||V.push(e),w||(w=!0,Promise.resolve().then(M))},M=()=>{V.forEach((e=>e())),V.length=0,w=!1},A=/\[A-Z]|^(?:value|checked|selected|muted)$/;let S=null;const T={getElement:e=>document.querySelector(e),createElement:e=>document.createElement(e),createTextNode:e=>document.createTextNode(e),appendChild:(e,t)=>e.appendChild(t),insertBefore:(e,t,n)=>e.insertBefore(t,n),removeChild:(e,t)=>e.removeChild(t),setAttribute(e,t,n){/\[A-Z]|^(?:value|checked|selected|muted)$/.test(t)?e[t]=n:"key"!==t&&"children"!==t&&e.setAttribute(t,n)},setText:(e,t)=>e.textContent=t,patchData(e,t,n,s,r){if(n!==s&&!(r&&r&exports.VNodeFlags.Element&&"children"===t))switch(t){case"style":if(n)for(const t in n)e.style[t]=n[t];if(s)for(const t in s)n&&n[t]===s[t]||(e.style[t]="");break;case"class":e.className=n;break;default:if(t.startsWith("on")){const r=t.split("on")[1].toLowerCase();n&&e.addEventListener(r,n),s&&e.removeEventListener(r,s)}else A.test(t)?e[t]=n:e.setAttribute(t,n)}}};function j(e){function r(t,n,s){if(l(t))return;const{flags:o}=t;o&exports.VNodeFlags.FC?function(e,t,n){const{type:s}=e;e._instance._update=()=>{if(e._instance._mounted){const n=e._instance._vnode,s=e._instance._render();d(s,n,t),e._instance._vnode=s}else{const s=e._instance._vnode=e._instance._render();r(s,t,n),e.el=s.el,e._instance._mounted=!0;for(const t of e._instance._onMount)t()}},S=e._instance,e._instance._render=s(e._instance._props),S=null,c((()=>{e._instance._update()}),{scheduler:b})}(t,n,s):o&exports.VNodeFlags.Element?function(t,n,s){const{data:l,childFlags:o,children:i}=t,a=t.el=e.createElement(t.type);l.ref&&(l.ref.value=a);for(const t in l)e.patchData(a,t,l[t],null,exports.VNodeFlags.Element);s?e.insertBefore(n,a,s):e.appendChild(n,a);!function(e,t,n,s){if(e&exports.ChildrenFlags.NoChildren)return;e&exports.ChildrenFlags.Single?r(t,s):e&exports.ChildrenFlags.Multiple&&function(e,t){for(const n of t)r(n,e.el)}(n,t)}(o,i,t,a)}(t,n,s):o&exports.VNodeFlags.Text?function(t,n,s){const r=e.createTextNode(t.children);t.el=r,s?e.insertBefore(n,r,s):e.appendChild(n,r)}(t,n,s):function(e,t,n){const{children:s}=e;Array.isArray(s)?(s.forEach((e=>r(e,t,n))),e.el=s[0].el):s&&(r(s,t,n),e.el=s.el)}(t,n,s)}function i(t,n){const{flags:s,children:r}=t;s&exports.VNodeFlags.Element||s&exports.VNodeFlags.Text?e.removeChild(n,t.el):s&exports.VNodeFlags.FC?a(t,n):s&exports.VNodeFlags.Fragment&&(Array.isArray(r)?r.forEach((e=>i(e,n))):r&&i(r,n))}function a(e,t){const{childFlags:n,children:s}=e,r=e.el;if(n&exports.ChildrenFlags.Multiple)for(const e of s)e.flags&exports.VNodeFlags.FC&&a(e,r);let l=e._instance._onUnmount;if(l.length)for(const e of l)e();t.removeChild(r)}function d(s,l,o){if(s&&l)if(t(s,l)){const t=s.flags;t&exports.VNodeFlags.FC?function(e,t){if(e.el=t.el,e._instance=t._instance,function(e,t){const s=e._instance._props,r=t._instance._props;return delete s.children,delete r.children,n(s,r)}(e,t))return;const s=e._instance._props,r=t._instance._props;for(const t in s)s[t]!==r[t]&&(e._instance._props[t]=s[t]);e._instance._update()}(s,l):t&exports.VNodeFlags.Text?function(t,n){const s=t.el=n.el;t.children!==n.children&&e.setText(s,t.children)}(s,l):t&exports.VNodeFlags.Element?function(t,n){const s=t.el=n.el;for(const r in t.data)e.patchData(s,r,t.data[r],n.data[r],exports.VNodeFlags.Element);for(const r in n.data)t.data[r]||e.patchData(s,r,null,n.data[r],exports.VNodeFlags.Element);p(t,n)}(s,l):function(e,t){p(e,t)}(s,l)}else!function(e,t,n){n.removeChild(t.el),r(e,n)}(s,l,o);else s?r(s,o):l&&e.removeChild(o,l.el)}function p(t,n){const{childFlags:l,children:a}=t,{childFlags:c,children:p,el:f}=n;if(l&exports.ChildrenFlags.NoChildren){if(c&exports.ChildrenFlags.Single)i(p,f);else if(c&exports.ChildrenFlags.Multiple)for(const e of p)i(e,f)}else if(l&exports.ChildrenFlags.Single){if(c&exports.ChildrenFlags.NoChildren)r(a,f);else if(c&exports.ChildrenFlags.Single)d(a,p,f);else if(c&exports.ChildrenFlags.Multiple){for(const e of p)i(e,f);r(a,f)}}else if(l&exports.ChildrenFlags.Multiple)if(c&exports.ChildrenFlags.NoChildren)for(const e of a)r(e,f);else if(c&exports.ChildrenFlags.Single){i(p,f);for(const e of a)r(e,f)}else c&exports.ChildrenFlags.Multiple&&function(t,n,l){let a=0,c=t.length-1,p=t[a],f=n.length-1,h=n[a];e:{for(;a<=c&&a<=f&&p.key===h.key;){if(d(p,h,l),a++,a>c||a>f)break e;p=t[a],h=n[a]}for(p=t[c],h=n[f];a<=c&&a<=f&&p.key===h.key;){if(d(p,h,l),c--,f--,a>c||a>f)break e;p=t[c],h=n[f]}}if(a>c&&a<=f)for(let e=a;e<=f;e++)i(n[e],l);else if(a>f){const e=f+1>=n.length?void 0:n[f+1].el;for(let n=a;n<=c;n++)r(t[n],l,e)}else{let u=!1,g=0,x=0;const _=c-a+1,F=new Array(_).fill(-1),y={};for(let e=0;e<_;e++)y[t[a+e].key]=e;for(let e=a;e<=f;e++)if(h=n[e],x<_){const n=y[h.key];o(n)?(p=t[n+a],d(p,h,l),x++,F[n]=e,n<g?u=!0:g=n):i(h,l)}else i(h,l);if(u){const n=s(F);let o=n.length-1;for(let s=c;s>=a;s--){if(p=t[s],-1===F[s]){r(p,l,s+1<t.length?t[s+1].el:void 0)}if(s===n[o])o--;else{const n=s+1<t.length?t[s+1].el:void 0;e.insertBefore(l,p.el,n)}}}}}(a,p,f)}return function(e,t){const n=t.vnode;n?e?(d(e,n,t),t.vnode=e):(t.removeChild(n.el),t.vnode=null):(r(e,t),t.vnode=e)}}const R=()=>!!S||(e("hook must be called inside a function component"),!1),B=j(T);exports.Fragment=v,exports.Ref=F,exports.VNode=C,exports._err=(e,t)=>{console.error(e),console.error(t)},exports._warn=e,exports.baseNodeOps=T,exports.checkHookAvailable=R,exports.createApp=(e,t)=>{t||(t=T);const n=j(t);return{mount(s){s?"string"!=typeof s||(s=t.getElement(s))?n(e,s):console.warn("无效的id或者class"):console.warn("请指定一个挂在节点的id或者class或者dom节点")}}},exports.createEffect=d,exports.createRenderer=j,exports.effect=c,exports.effectStack=i,exports.expose=e=>{R()&&S._props.ref&&(S._props.ref.value=e)},exports.h=k,exports.isArray=e=>Array.isArray(e),exports.isDef=o,exports.isObject=r,exports.isSameVNode=t,exports.isUndef=l,exports.jsx=N,exports.jsxs=E,exports.lis=s,exports.markRaw=e=>(e._raw=!0,e),exports.onMounted=e=>{R()&&S._onMount.push(e)},exports.onUnmounted=e=>{R()&&S._onUnmount.push(e)},exports.pauseTracking=()=>{a=!0},exports.reactive=_,exports.ref=function(e){return l(e)?new F:(e=>e&&!!e._isRef)(e)?e:new F(e)},exports.render=B,exports.resetTracking=()=>{a=!1},exports.shallowEqual=n,exports.stop=e=>{e.active=!1},exports.toRaw=e=>g.get(e)||e,exports.track=h,exports.trigger=p;
